---
title: Using Zerops Setup Control (zsc)
description: Command-line utility for managing Zerops containers, providing functionality for scaling, backups, environment management, and runtime operations
---

# zsc (Zerops Setup Control)

Zsc is a management tool that comes pre-installed in all Zerops containers, providing functionality for container management, scaling and more. It's available in both runtime and build environments without any additional setup needed.

```sh
zsc --help
Zerops SetupControl CLI

Usage:
  zsc [command]

Available Commands:
  backup-create        creates a new backup of the specified stack
  completion           Generate the autocompletion script for the specified shell
  connectSharedStorage Connect shared storage to the container
  crontab              Perform crontab actions defined in zerops.yml
  execOnce             Execute a command once for the provided key
  fail-me              Fail current container
  help                 Help about any command
  install              Run install commands for the specified base
  noop                 Infinitely blocking command that does nothing
  scale                Scale container CPU or memory instantly*
  setSecretEnv         Set an secret environment variable in the current stack context
  test                 Run various tests
  version              application version

Flags:
  -h, --help   help for zsc
```

## Command Overview

### Backup Commands

#### backup-create
Create backup of a specified stack:

```bash
zsc backup-create
```

Backup captures:
- Stack configuration
- Service data
- Environment settings
- Deployment state


### Core Management

#### scale
Adjust container resources dynamically:

```bash
# CPU Scaling
zsc scale cpu auto           # Reset to automatic scaling
zsc scale cpu 5 1h          # Set to 5 CPU cores for 1 hour
zsc scale cpu +2 30m        # Add 2 CPU cores for 30 minutes

# Memory Scaling
zsc scale memory auto       # Reset to automatic scaling
zsc scale memory 5GB 1h     # Set to 5GB RAM for 1 hour
zsc scale memory +2.5GB 600s # Add 2.5GB RAM for 600 seconds
```

**Important Scaling Notes:**
- Changes take effect within ~10 seconds
- Minimum duration: 10 minutes
- Supported values: "auto", "min", "max", or numeric values
- RAM requires units (KiB, MiB, GiB)
- CPU values must be integers
- Use "+" prefix for relative scaling

#### execOnce
Ensure single execution across HA setups:

```bash
zsc execOnce "operation-key" "your-command"
```

Common use cases:
- Database migrations
- One-time initialization tasks
- Configuration updates

### Storage & Environment

#### connectSharedStorage
Connect shared storage volumes:

```bash
zsc connectSharedStorage
```

#### setSecretEnv
Manage environment variables:

```bash
# Direct value assignment
zsc setSecretEnv SECRET_KEY "your-secret-value"

# Input from stdin
echo "your-secret-value" | zsc setSecretEnv SECRET_KEY -
```

### Testing & Debugging

#### test
Run various tests including network connectivity:

```bash
# TCP connectivity test
zsc test tcp <host>:<port> [options]

# Options:
--timeout <duration>     # Maximum test duration (default: 30s)
--dialTimeout <duration> # Single attempt timeout (default: 2s)
-4                      # Force IPv4
-6                      # Force IPv6
```

#### fail-me
Deliberately fail the current container (useful for testing failover scenarios):

```bash
zsc fail-me
```

#### noop
Keep container alive for debugging:

```bash
zsc noop [--silent]
```

Features:
- Prevents container termination
- Enables investigation time
- Silent mode available
- Terminates on SIGTERM

### Installation & Setup

#### install
Add technologies to your runtime container:

```yaml
# Example in zerops.yml
zerops:
  - setup: nodejsapp
    run:      
      os: ubuntu
      base: nodejs@22
      prepareCommands:
        - zsc install python@3.7
```

#### completion
Generate shell autocompletion scripts:

```bash
zsc completion [bash|zsh|fish|powershell]
```

### Task Management

#### crontab
Manage scheduled tasks defined in zerops.yml:

```bash
zsc crontab
```

## Best Practices

1. **Resource Scaling**
   - Use relative scaling for temporary adjustments
   - Monitor resource usage after scaling
   - Consider node capacity when scaling

2. **High Availability**
   - Use `execOnce` for migrations
   - Test failover with `fail-me`
   - Implement proper timeout handling

3. **Debugging**
   - Use `noop` for investigation
   - Implement proper logging
   - Monitor container states

## Common Use Cases

### Database Migration in HA Setup
```bash
zsc execOnce "migrate-v2" "php artisan migrate"
```

### Temporary Resource Boost
```bash
zsc scale cpu +2 1h
zsc scale memory +1GB 1h
```

### Testing HA Failover
```bash
zsc fail-me  # On one container
zsc test tcp other-service:80  # Verify connectivity after failover
```

### Secret Management
```bash
zsc setSecretEnv API_KEY "$(generate_api_key)"
```

## Additional Information

- View all commands and options with `zsc --help`
- Check version information with `zsc version`
