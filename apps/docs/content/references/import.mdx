---
title: Project Import YAML Configuration
description: Learn how to define and import a project using a YAML configuration file
---

import { Dropdown, DropdownItem } from '/src/components/Dropdown';
import { Tooltip } from 'docs-ui';

The Zerops YAML import scripts provide an intuitive way to manage your projects. You can create and instantiate entire Zerops projects or specific services
with a single click in the Zerops GUI.

You can also use the `zcli import` command. This configuration is a simple way to migrate or replicate your projects or services.

:::info
This is a general guideline; not all keys are valid for every service type. For technology-specific details, refer to the **Create service** page in the **How To** section of the Zerops documentation.
:::

---

:::info Laravel project's import yaml example with <Tooltip text="The yamlPreprocessor option in your project & service import YAML allows you to generate random secret values, passwords, and public/private key pairs for your secret environment variables."><a href="/references/importyml/pre-processor">yamlPreprocessor</a></Tooltip>
<br/>
```yml
#yamlPreprocessor=on
project:
  name: recipe-laravel-minimal
  tags:
    - zerops-recipe

services:
  - hostname: app
    type: php-nginx@8.4
    buildFromGit: https://github.com/zeropsio/recipe-laravel-minimal
    enableSubdomainAccess: true
    envSecrets:
      APP_KEY: <@generateRandomString(<32>)>
      APP_DEBUG: true
      APP_ENV: development

  - hostname: db
    type: postgresql@16
    mode: NON_HA
    priority: 10

  - hostname: adminer
    type: php-apache@8.3
    buildFromGit: https://github.com/zeropsio/recipe-adminer@main
    enableSubdomainAccess: true
```
:::

:::note
- `REQUIRED.` If a parent object is defined, the key-value pair is required to be filled. All other key-value pairs are optional.
:::

<Dropdown>
<DropdownItem title="Comprehensive example of an import YAML configuration">

This section provides a comprehensive example of an import YAML configuration file, allowing you to define and import a project and its services with environment variables.

  ```yml
# ==== Define a project to import ====
project:
  # REQUIRED. Name of your project
  name: project0
  # Project description
  description: "This project is an example only"
  # List of project tags for filtering
  tags:
    - test
    - dev
# ==== Define a list of services to import into the project ====
services:
  # REQUIRED. Name of your service
  - hostname: service1
    # REQUIRED. Choose from list of supported technologies and their versions
    type: nodejs@latest
    # HA or NON_HA mode
    mode: HA
    # Map of secret environment variables
    envSecrets:
      SECRET_KEY: <@generateRandomString(<32>)>
      DATABASE_HOST: ${db_hostname}
      DATABASE_NAME: ${db_hostname}
    # Object storage size in GB
    objectStorageSize: 2
    # Choose object storage policy from a predefined list
    objectStoragePolicy: public-read-write
    # Define additional policy
    objectStorageRawPolicy:
    # One time build git repository
    buildFromGit: https://github.com/zeropsio/recipe-nodejs-hello-world@main
    # true or false
    enableSubdomainAccess: true
    # The higher the sooner the service is created
    priority: 1
    # Vertical autoscaling configuration object
    verticalAutoscaling:
      minVCpu: 1
      maxVCpu: 5
      # Choose SHARED or DEDICATED
      cpuMode: DEDICATED
      minRam: 1
      maxRam: 32
      minDisk: 1
      maxDisk: 100
      startCpuCoreCount:
      minFreeCpuCores:
      minFreeCpuPercent:
      minFreeRamGB:
      minFreeRamPercent:
    # Minimum number of containers
    minContainers: 2
    # Maximum number of containers
    maxContainers: 6
    # List of shared storage services to connect to
    mount:
      - teststorage1
    # Full nginx config
    nginxConfig: |-
      server {
          listen 80 default_server;
          listen [::]:80 default_server;

          server_name _;
          root /var/www;

          location / {
              try_files $uri $uri/ /index.html;
          }

          access_log syslog:server=unix:/dev/log,facility=local1 default_short;
          error_log syslog:server=unix:/dev/log,facility=local1;
      }
    # zerops.yml service name or full config file
    zeropsSetup:
      build:
        base: nodejs@latest
        buildCommands:
          - echo zerops.yml from import
          - yarn
          - yarn run build
        deployFiles: ./
        cache: node_modules
      run:
        initCommands:
          - |
            if ! zcli bucket s3 create $STORAGE_HOSTNAME $STORAGE_BUCKET_NAME --x-amz-acl=private; then
            echo "The bucket was not created, you have to do it manually!"
            fi
        start: yarn start
  # REQUIRED. Name of your other service
  - hostname: teststorage1
    type: shared-storage
    ...
  ```
</DropdownItem>
</Dropdown>

## Project Configuration

The project configuration is used to define the project you want to import.

### Usage

<Dropdown>
  <DropdownItem title="Project Structure">

    <table className="w-full my-1.5">
      <thead>
        <tr>
          <th className="w-fit">Field</th>
          <th className="w-fit">Type</th>
          <th className="w-fit">Description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td className="w-fit">project</td>
          <td className="w-fit">object</td>
          <td className="w-fit">
            _REQUIRED, if a whole project is imported_
            Only one project can be defined.
          </td>
        </tr>
        <tr>
          <td className="w-fit">name</td>
          <td className="w-fit">string, REQUIRED</td>
          <td className="w-fit">
            The name of the new project. Duplicates are allowed.
          </td>
        </tr>
        <tr>
      <td className="w-fit">description</td>
      <td className="w-fit">string</td>
      <td className="w-fit">
        Description of the new project.
          </td>
        </tr>
        <tr>
          <td className="w-fit">tags</td>
          <td className="w-fit">list of strings</td>
          <td className="w-fit">
            One or more string tags. Tags do not have a functional meaning, they only provide better orientation in projects.
          </td>
        </tr>
      </tbody>
    </table>
  </DropdownItem>
</Dropdown>

```yml
# ==== Define a project to import ====
project:
  # REQUIRED. Name of your project
  name: project0
  # Project description
  description: "This project is an example only"
  # List of project tags for filtering
  tags:
    - test
    - dev
```

This will create a project with the name `project0` and the description `This project is an example only`. The project will have two tags: `test` and `dev`.

The `project` object requires only the `name` parameter - both `description` and `tags` are optional.

## Service Configuration

The service configuration is used to define the services, environment variables, and other settings you want to import into the project(You require at least one service and you need to have a project to import into or define the project in the yaml).

### Usage

<Dropdown>
  <DropdownItem title="Service Structure">

    <table className="w-full my-1.5">
  <thead>
    <tr>
      <th className="w-fit">Field</th>
      <th className="w-fit">Type</th>
      <th className="w-fit">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td className="w-fit">services</td>
      <td className="w-fit">list of objects, REQUIRED</td>
      <td className="w-fit">
        At least one service is required.
      </td>
    </tr>
    <tr>
      <td className="w-fit">hostname</td>
      <td className="w-fit">string, REQUIRED</td>
      <td className="w-fit">
        The unique service identifier.
        Limitations:
        - duplicates in the same project forbidden
        - maximum 25 characters, lowercase ASCII letters (a-z) or numbers (0-9) only
      </td>
    </tr>
    <tr>
      <td className="w-fit">type</td>
      <td className="w-fit">enum, REQUIRED</td>
      <td className="w-fit">
        Specifies the service type and version. See [supported types](/references/importyml/type-list).
      </td>
    </tr>
    <tr>
      <td className="w-fit">mode</td>
      <td className="w-fit">enum</td>
      <td className="w-fit">
        Values: **HA / NON_HA** (default NON_HA)
        Defines the operation mode of the service.
      </td>
    </tr>
    <tr>
      <td className="w-fit">envSecrets</td>
      <td className="w-fit">map[string]string</td>
      <td className="w-fit">
        Environment variables that are blurred by default in Zerops GUI. Can be edited or deleted in Zerops GUI.
      </td>
    </tr>
    <tr>
      <td className="w-fit">objectStorageSize</td>
      <td className="w-fit">integer</td>
      <td className="w-fit">
        Object storage size in GB.
      </td>
    </tr>
    <tr>
      <td className="w-fit">objectStoragePolicy</td>
      <td className="w-fit">enum</td>
      <td className="w-fit">
        Values: **private / public-read / public-objects-read / public-write / public-read-write / custom**
        Select a predefined AWS S3 bucket access policy.
      </td>
    </tr>
    <tr>
      <td className="w-fit">objectStorageRawPolicy</td>
      <td className="w-fit">json</td>
      <td className="w-fit">
        Define your own AWS S3 bucket access policy. See [AWS docs](https://docs.aws.amazon.com/AmazonS3/latest/userguide/access-policy-language-overview.html) for details.
        Use `{{ .BucketName }}` placeholder if you need to use bucket name in your custom policy rules.
      </td>
    </tr>
    <tr>
      <td className="w-fit">buildFromGit</td>
      <td className="w-fit">string (URL)</td>
      <td className="w-fit">
        A URL of a Github or Gitlab repository used for a one-time build of your service.
      </td>
    </tr>
    <tr>
      <td className="w-fit">enableSubdomainAccess</td>
      <td className="w-fit">boolean</td>
      <td className="w-fit">
        Default: false
        Set `true`, if you want to enable a public access to your service via a Zerops subdomain. Not suitable for production.
      </td>
    </tr>
    <tr>
      <td className="w-fit">priority</td>
      <td className="w-fit">integer</td>
      <td className="w-fit">
        Services are sorted before creation by priority in descending order, i.e. the higher the priority the sooner the service is created.
      </td>
    </tr>
  </tbody>
    </table>
  </DropdownItem>
</Dropdown>

```yml
#yamlPreprocessor=on
services:
# REQUIRED: Name of your service
- hostname: service1
  # REQUIRED: Choose from list of supported technologies and their versions
  type: nodejs@latest
  # High-Availability or Non-High-Availability mode
  mode: HA
  # Map of secret environment variables
  envSecrets:
    SECRET_KEY: <@generateRandomString(<32>)>
    DATABASE_HOST: ${db_hostname}
    DATABASE_NAME: ${db_hostname}
  # Object storage size in GB
  objectStorageSize: 2
  # Choose object storage policy from a predefined list
  objectStoragePolicy: public-read-write
  # Define additional policy
  objectStorageRawPolicy:
  # One time build git repository
  buildFromGit: https://github.com/zeropsio/recipe-nodejs-hello-world@main
  # Enables public access via zerops.app subdomain
  enableSubdomainAccess: true
  # The higher the sooner the service is created
  priority: 1
```

This yaml will create a `nodejs@latest` service named `service1` in `HA` (High-Availability) mode with the following configurations:
- Environment variables: `SECRET_KEY`(requires yamlPreprocessor), `DATABASE_HOST` and `DATABASE_NAME`(requires you to have a db service in the same project)
- Object storage: 2GB with `public-read-write` policy
- Git repository: `https://github.com/zeropsio/recipe-nodejs-hello-world@main`
- Public access enabled via Zerops subdomain
- Priority: 1

The `services` object allows you to define one or more services in the same yaml file and you can define the same parameters like `hostname`, `type`, `mode`, `envSecrets`, `objectStorageSize`, `objectStoragePolicy`, `objectStorageRawPolicy`, `buildFromGit`, `enableSubdomainAccess`, `priority` for each service no matter if it's runtime, database, etc.

:::caution
The `yamlPreprocessor` option in your project & service import YAML is required to generate random secret values, passwords, and public/private key pairs. For more information, see the [yamlPreprocessor](/references/importyml/pre-processor) page.
:::

## Vertical Autoscaling Configuration

The vertical autoscaling configuration is used to define the vertical autoscaling settings for the service.

### Usage

<Dropdown>
  <DropdownItem title="Vertical Autoscaling Structure">

<table className="w-full my-1.5">
  <thead>
    <tr>
      <th className="w-fit">Field</th>
      <th className="w-fit">Type</th>
      <th className="w-fit">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td className="w-fit">minVCpu</td>
      <td className="w-fit">integer</td>
      <td className="w-fit">Minimum number of virtual CPUs</td>
    </tr>
    <tr>
      <td className="w-fit">maxVCpu</td>
      <td className="w-fit">integer</td>
      <td className="w-fit">Maximum number of virtual CPUs</td>
    </tr>
    <tr>
      <td className="w-fit">cpuMode</td>
      <td className="w-fit">enum</td>
      <td className="w-fit">Values: **SHARED / DEDICATED**</td>
    </tr>
    <tr>
      <td className="w-fit">minRam</td>
      <td className="w-fit">float</td>
      <td className="w-fit">
        Minimum RAM in GB that each container of the service can scale down to.
      </td>
    </tr>
    <tr>
      <td className="w-fit">maxRam</td>
      <td className="w-fit">float</td>
      <td className="w-fit">
        Maximum RAM in GB that each container of the service can scale up to.
      </td>
    </tr>
    <tr>
      <td className="w-fit">minDisk</td>
      <td className="w-fit">float</td>
      <td className="w-fit">
        Minimum disk space in GB that each container of the service can scale down to.
      </td>
    </tr>
    <tr>
      <td className="w-fit">maxDisk</td>
      <td className="w-fit">float</td>
      <td className="w-fit">
        Maximum disk space in GB that each container of the service can scale up to.
      </td>
    </tr>
    <tr>
      <td className="w-fit">startCpuCoreCount</td>
      <td className="w-fit">integer</td>
      <td className="w-fit">
        Number of CPU cores with which each container starts.
      </td>
    </tr>
    <tr>
      <td className="w-fit">minFreeCpuCores</td>
      <td className="w-fit">float</td>
      <td className="w-fit">
        Minimum number of unused CPU cores before a container starts scaling.
      </td>
    </tr>
    <tr>
      <td className="w-fit">minFreeCpuPercent</td>
      <td className="w-fit">float</td>
      <td className="w-fit">
        Minimum percentage of unused CPU cores before a container starts scaling.
      </td>
    </tr>
    <tr>
      <td className="w-fit">minFreeRamGB</td>
      <td className="w-fit">float</td>
      <td className="w-fit">
        Minimum unused memory in GB before a container starts scaling.
      </td>
    </tr>
    <tr>
      <td className="w-fit">minFreeRamPercent</td>
      <td className="w-fit">float</td>
      <td className="w-fit">
        Minimum percentage of unused memory before a container starts scaling.
      </td>
    </tr>
  </tbody>
</table>
  </DropdownItem>
</Dropdown>

```yml
services:
  - hostname: app
    type: php-nginx@8.4
    buildFromGit: https://github.com/example/app
    enableSubdomainAccess: true
    verticalAutoscaling:
      minVCpu: 1
      maxVCpu: 5
      # Choose SHARED or DEDICATED
      cpuMode: DEDICATED
      minRam: 1
      maxRam: 32
      minDisk: 1
      maxDisk: 100
      startCpuCoreCount:
      minFreeCpuCores:
      minFreeCpuPercent:
      minFreeRamGB:
      minFreeRamPercent:
```

This yaml will create a service with the hostname `app` with `php-nginx@8.4` runtime with `HA` High-Availability mode for vertical autoscaling:

- CPU: `1-5` virtual CPUs in `DEDICATED` mode
- RAM: `1-32 GB`
- Disk Space: `1-100 GB`

The `VerticalAutoscaling` map allows you to define the vertical autoscaling settings for the service with parameters like `minVCpu`, `maxVCpu`, `cpuMode`, `minRam`, `maxRam`, `minDisk`, `maxDisk`, `startCpuCoreCount`, `minFreeCpuCores`, `minFreeCpuPercent`, `minFreeRamGB`, `minFreeRamPercent`.

## Horizontal Autoscaling Configuration

The horizontal autoscaling configuration is used to define the horizontal autoscaling settings for the service.

### Usage

<Dropdown>
  <DropdownItem title="Horizontal Autoscaling Structure">
    <table className="w-full my-1.5">
      <thead>
        <tr>
          <th className="w-fit">Field</th>
          <th className="w-fit">Type</th>
          <th className="w-fit">Description</th>
        </tr>
      </thead>
      <tbody>
    <tr>
      <td className="w-fit">minContainers</td>
      <td className="w-fit">integer</td>
      <td className="w-fit">Default: 1, maximum value: 6 - Minimum number of containers of the service.</td>
    </tr>
    <tr>
      <td className="w-fit">maxContainers</td>
      <td className="w-fit">integer</td>
      <td className="w-fit">Maximum value: 6 - Maximum number of containers of the service.</td>
    </tr>
    </tbody>
    </table>
  </DropdownItem>
</Dropdown>

```yml
services:
  - hostname: app
    type: php-nginx@8.4
    buildFromGit: https://github.com/example/app
    enableSubdomainAccess: true
    # Minimum number of containers
    minContainers: 2
    # Maximum number of containers
    maxContainers: 6
```

The `minContainers` and `maxContainers` parameters allow you to define the minimum and maximum number of containers(It automatically scales the service between the minimum and maximum number of containers) for the service.

## Mount Shared Storage

The mount shared storage configuration is used to define the shared storage to mount to the service.

### Usage


<table className="w-full my-1.5">
  <thead>
    <tr>
      <th className="w-fit">Field</th>
      <th className="w-fit">Type</th>
      <th className="w-fit">Description</th>
    </tr>
  </thead>
  <tbody>
  <tr>
    <td className="w-fit">mount</td>
    <td className="w-fit">list of strings</td>
    <td className="w-fit">Mount shared storage to the service. `buildFromGit` must be filled.</td>
    </tr>
  </tbody>
</table>

```yml
services:
  - hostname: app
    type: php-nginx@8.4
    buildFromGit: https://github.com/example/app
    enableSubdomainAccess: true
    mount:
      - teststorage1
```

The `mount: |-` parameter allows you to mount a shared storage(should be created inside the project) to the service.


## Using Nginx Configuration

The nginx configuration is used to define the nginx settings for the service.

### Usage

<table className="w-full my-1.5 whitespace-nowrap">
  <thead>
    <tr>
      <th className="w-fit">Field</th>
      <th className="w-fit">Type</th>
      <th className="w-fit">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td className="w-fit">nginxConfig</td>
      <td className="w-fit">string (multiline)</td>
      <td className="w-full">Insert full nginx config.</td>
    </tr>
   </tbody>
</table>

```yml
#yamlPreprocessor=on
services:
  - hostname: app
    type: php-nginx@8.4
    buildFromGit: https://github.com/example/app
    enableSubdomainAccess: true
    envSecrets:
      APP_KEY: <@generateRandomString(<32>)>
    nginxConfig: |-
      server {
          listen 80 default_server;
          listen [::]:80 default_server;

          server_name _;
          root /var/www;

          location / {
              try_files $uri $uri/ /index.html;
          }

          access_log syslog:server=unix:/dev/log,facility=local1 default_short;
          error_log syslog:server=unix:/dev/log,facility=local1;
      }
```

The `nginxConfig: |-` parameter allows you to use a custom nginx configuration for the service.

## Using zerops.yml Configuration

This shows you how you can use the `zeropsSetup` parameter as a way to insert a full [zerops.yml configuration file](/references/zeropsyml) into your service using import yaml.

### Usage

<table className="w-full my-1.5">
  <thead>
    <tr>
      <th className="w-fit">Field</th>
      <th className="w-fit">Type</th>
      <th className="w-fit">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td className="w-fit">zeropsSetup</td>
      <td className="w-fit whitespace-nowrap">string or object</td>
      <td className="w-fit">Provide the name of the service from your zerops.yml (find it under `-setup: {name}`) or insert full [zerops.yml configuration file](/references/zeropsyml).</td>
    </tr>
  </tbody>
</table>

```yml
#yamlPreprocessor=on
services:
  - hostname: app
    type: php-nginx@8.4
    buildFromGit: https://github.com/example/app
    enableSubdomainAccess: true
    envSecrets:
      APP_KEY: <@generateRandomString(<32>)>
    zeropsSetup:
      build:
        base: php-nginx@8.4
        buildCommands:
          - composer install
        deployFiles: ./
        cache: vendor
    run:
      initCommands:
        - |
          if ! zcli bucket s3 create $STORAGE_HOSTNAME $STORAGE_BUCKET_NAME --x-amz-acl=private; then
          echo "The bucket was not created, you have to do it manually!"
          fi
      start: yarn start
```

The `zeropsSetup: |-` parameter allows you to use a custom [zerops.yml](/references/zeropsyml) configuration for the service.

