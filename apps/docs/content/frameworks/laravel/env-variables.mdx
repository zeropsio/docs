---
title: Manage Environment Variables
description: Manage Environment Variables on Zerops for Laravel
---

import Image from '/src/components/Image';

Zerops manages environment variables without requiring manual `.env` files. This enables running applications across different environments (development, staging, production) while keeping environment-specific configurations isolated from your code.

## Types of env variables in Zerops

Zerops provides three types of environment variables: basic build variables, basic runtime variables, and secret variables. Each serves different purposes in your application configuration.

Secret variables, managed through the Zerops GUI, are ideal for sensitive data like API keys and passwords, values that need frequent changes, and environment-specific configurations. These can be modified without redeploying your application.

Basic build and runtime variables are defined in your zerops.yml file. Use these for build-time configurations, runtime settings that should be version controlled, and default values that remain consistent across environments. These variables require a redeployment when modified.

When you need to update build or runtime variables, modify your zerops.yml and redeploy your application to Zerops.

:::info

You can [reference](#reference-a-local-variable-in-another-variable-value) another variable of the same service or even a variable of [another service](#reference-a-variable-of-another-project-service) within the same project.

:::

### Using Zerops GUI

In your Zerops service you can set secret variables at environment variables page:

- Scroll to the **Secret variables** section and click on the **Add secret variable** button and set variable key and value.

You can edit or delete env variables that you've created by hovering over the row and clicking on the menu on the right side of each row.

<p align="center">
  <Image 
    lightImage="/img/gui/secrets.webp"
    darkImage="/img/gui/secrets.webp"
    alt="Environment Variables Secrets"
    style={{ width: '95%', height: 'auto' }}
  />
</p>

The changes you've made in the list of env variables need to be committed. Click on the **Commit x changes** button and Zerops will update the env variables in all containers of your project's services.

:::caution
You need to **restart** the runtime service after you commit the changes in env variables. The PHP process running in the container receives the list env variables only when it starts. Update of the env variables while the PHP process is running does not affect your application.
:::

### Build Environment Variables using zerops.yml

To set basic env variables for the build environment, add the `envVariables` attribute to the build section in your `zerops.yml`

```yml
zerops:
  # define hostname of your service
  - setup: app
    build:
      base: php@8.4
      os: alpine
      # OPTIONAL. Defines the env variables for the build environment:
      envVariables:
        APP_DEBUG: true
        APP_ENV: development
    # ==== how to build your application ====
    run:
      base: php-nginx@8.4
      os: alpine
      siteConfigPath: site.conf.tmpl
```

When you need to update a value of an existing env variable or change the set of build or runtime env variables, update your `zerops.yml` and redeploy your application to Zerops.

### Runtime Environment Variables using zerops.yml

To set basic env variables for the runtime environment, add the `envVariables` attribute to the runtime section in your `zerops.yml`

```yml
zerops:
  # define hostname of your service
  - setup: app
    build:
      base: php@8.4
      os: alpine
    # ==== how to build your application ====
    run:
      base: php-nginx@8.4
      os: alpine
      siteConfigPath: site.conf.tmpl
      # OPTIONAL. Defines the env variables for the runtime environment:
      envVariables:
        DB_CONNECTION: pgsql
        DB_DATABASE: db
        DB_HOST: db
        DB_USERNAME: ${db_user}
        DB_PASSWORD: ${db_password}
        DB_PORT: 5432
```

When you need to update a value of an existing env variable or change the set of build or runtime env variables, update your `zerops.yml` and redeploy your application to Zerops.

## Environment Variable Restrictions

Environment variable names must start with a letter or underscore, followed by any combination of letters, numbers, or underscores (matching the pattern `[a-zA-Z_]+[a-zA-Z0-9_]*`). While keys are case-sensitive, each variable name must be unique within a service, regardless of its case.

For variable values, Zerops only accepts ASCII characters, and end-of-line characters are not permitted. These restrictions apply uniformly across all environment variable types in Zerops, whether they're secret, build, or runtime variables.

```yml
APP_NAME
database_url
API_KEY_123
_INTERNAL_VALUE
```



## Referencing other env variables

You can reference another variable of the same service using `${key}` in your variable value. You can even reference a variable from a different service using `${hostname_key}`. The referenced variable doesn't need to exist when you are entering your variable.

### Reference a local variable in another variable value

<table>
  <thead>
    <tr>
      <th className="w-fit text-start">Variable key</th>
      <th className="w-full text-start">Variable value</th>
      <th className="w-full text-nowrap text-start">Computed variable value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>id</td>
      <td>12345</td>
      <td>12345</td>
    </tr>
    <tr>
      <td>hostname</td>
      <td>app</td>
      <td>app</td>
    </tr>
    <tr>
      <td>name</td>
      <td>`${id}-${hostname}`</td>
      <td>12345-app</td>
    </tr>
  </tbody>
</table>

### Reference a variable of another project service

Let's say your project contains two PostgreSQL services `dbtest` and `dbprod`. Both services have a `connectionString` variable. Then you can create a `dbConnectionString` env variable in your PHP runtime and set `${dbtest_connectionString}` as the variable value. Zerops will fill in the value of the `connectionString` variable of the `dbtest` service.

When you change the `dbConnectionString` value to `${dbprod_connectionString}`, Zerops will fill in the value of the `connectionString` variable of the `dbprod` service.

:::caution
When you change the value of the `connectionString` variable in the service `dbtest` and commit the changes you need to **restart** the PHP service. The PHP process running in the container receives the list env variables only when it starts. Update of the env variables while the PHP process is running does not affect your application.
:::

## Generated Environment Variables

Zerops creates several helper variables when a PHP service is created, e.g. `hostname`, `PATH`. Some helper variables are read-only (`hostname`), others are editable (`PATH`). Generated variables cannot be deleted.

Generated env variables are listed on the **Environment variables** page. Scroll to the **Generated variables** section.

<p align="center">
  <img
    src="/img/screenshots/nodejs_generated_variables.png"
    alt="image"
    width="100%"
    height="auto"
  />
</p>

## How to read Environment Variables from your PHP app

Zerops passes all environment variables from all project services when your PHP app is deployed and started.

To access the local environment variable i.e. the variable set to this PHP service in your app, use:

```sh
getenv('YOUR_VARIABLE_KEY_HERE');
```

## How to read Environment Variables of another service

All services of the same project can reference environment variables from other services. To use an environment variable from one service in another service in the same project, you must prefix the environment variable key with the service hostname and underscore.

<table>
  <thead>
    <tr>
      <th>Service</th>
      <th>Variable</th>
      <th>Reference Key</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>mariadb1</td>
      <td>username</td>
      <td>`${mariadb1_user}`</td>
    </tr>
    <tr>
      <td>mariadb2</td>
      <td>password</td>
      <td>`${mariadb2_password}`</td>
    </tr>
  </tbody>
</table>

### Usage

```yaml
zerops:
  - setup: app
    build:
      base: php@8.4
      envVariables:
        DB_USERNAME: ${mariadb2_user}
        DB_PASSWORD: ${mariadb2_password}
```

## How to read Runtime Environment Variables in the Build Environment

You can use runtime env variables in the build environment using the `RUNTIME_` prefix. For example if you have a runtime variable with the `connectionString` key, use the `RUNTIME_connectionString` to read the variable in the build environment. This rule applies both for basic and secret runtime variables.

## Basic and Secret Environment Variables with the Same Key

If you create a secret env variable and a basic runtime env variable with the same key, Zerops saves the basic runtime env variable from your zerops.yml and ignores the secret env variable.

If you create a basic build env variable and a runtime env variable with the same key, Zerops saves both because the build and runtime environments have separate sets of env variables.

